# 第三阶段：WEB安全基础学习

##  3x01页面解析的流程学习 

1、理解域名解析的整个过程 

2、理解 web 页面请求的整个流程，绘制流程图（ nginx 处理的 11 个过程）

3、学习 http 协议中的字段及含义 

4、学习 http 请求方法以及返回状态码的类型和含义 

扩展学习：思考这个过程中都会涉及哪些安全问题，常规的网站架构（ waf 、 cdn 等设备部署在什么地 方） 



## 3x02各种注入类型的环境搭建和代码编写 

（使用什么语言，自选） 

1、编写常规回显注入的代码，在之前的搭建的环境中测试是否正常 

2、编写报错注入的代码，并做相应的服务器配置来满足条件，并测试代码是否正常 

3、编写盲注的代码，在之前的搭建的环境中测试是否正常 

4、编写宽子节注入的代码，并做相应的服务器配置来满足条件，并测试代码是否正常

注意事项：环境可以是虚拟机的快照、也可以是 docker 环境，具体用什么可以自选，重点是学习造成 这几类注入的原因；注入漏洞通常会出现在多个场景，比如：注册、登录、查询、搜索、留言等，所以 写那些脚本的时候可以自选场景，不限于举例的场景；有些注入环境与服务器配置相关，需要大家配置 相应的漏洞环境来结合自己编写的脚本完成漏洞环境的搭建。 如何编写漏洞脚本呢？有些同学一点编程基础都没有，想要自己实现漏洞代码非常艰难，怎么办呢？ 

第一级：完全不懂，没有一点开发经验的 对于这部分同学，直接去写漏洞代码有点强人所难，如何跟上节奏完成任务呢？自己可以去收集一些 关 于 sql 注入的 CTF 题目，将那些题目搭建起来，不用写代码、也不用看代码，通过自己的搜索能力完 成本周的任务也是可以的，具体代码想要看懂需要时间，这个可以后续自己节省时间来学习编程基础。 

第二级：懂点 PHP 编程语法，能看懂 php 代码的 这部分同学就不要光搭建了， html 、 js 等前端基础没有的情况下，编写页面也比较费劲，那么你也可 以去像第一级同学一样的方式去获取一些题目，然后自己是看得懂代码的，所以可以基于那些 ctf 已有 前端，然后更改后端代码，从而实现本周任务，就是借用别人的前端，完成自己的目标。 

第三级：会写 php 并且懂一些前端 js 、 html 等基础 这部分同学就比较高级了，完全可以自己实现相关代码，前端后端，各种场景，应该得心应手了，所以 要给大家做表率，可以挑一些少见的场景来设计实现，作为大家的领路人。 其他情况 大家对于编程语言有不同的基础，大家可以选择自己擅长的语言来实现，具体情况自己来定。 



## 3x03手工测试之前编写的注入环境 

1、手工测试之前搭建的不同注入环境，并记录 sql 语句，最终以获取 mysql 中的用户信息和当前表的 信息为目标 

2、思考通过注入漏洞可以做什么？ 

3、思考注入漏洞如何防御？代码、服务器等角度 

扩展学习：针对不同的注入漏洞，编写防御代码，具体如何防御自己决定，相关代码均记录在报告中， 测试自己的防御代码是否可以绕过，并将过程进行记录 



## 3x04 XSS 漏洞学习实战 

1、编写一个存在 xss 漏洞的页面 

2、利用 xss 漏洞获取当前用户 cookie 

3、思考，利用 xss 漏洞能干嘛（参考 beef ） 

报告要求：记录编写的页面代码、操作流程、思考总结 

扩展学习： 1、学习如何防御 xss 、总结防御策略加到报告里 

​                     2、理解 csrf 的原理以及如何利用和防御 



## 3x05 SSRF 漏洞学习实战 

1、编写一个存在 ssrf 漏洞页面，思考造成该漏洞的函数有哪些 

2、利用 ssrf 进行内网端口扫描（思考利用 ssrf 可以做什么，为什么） 

扩展学习： 1、防御 SSRF 漏洞都有哪些方式，是否可以绕过，思考总结和实际操作过程记录在报告中 

​                    2、理解 xxe 的原理以及如何利用和防御 



## 3x06上传漏洞 

1、编写一个上传图片的功能页面 、

2、针对上传的文件进行验证（后缀验证、文件头验证、文件名验证等） 

3、文件上传通常会与文件解析漏洞相结合，可以收集整理存在解析漏洞的组件和相关版本，无法部署相 关环境，可以学习相关技术，不用实际操作 

扩展学习：学习如何绕过黑名单验证、文件头验证，如何杜绝上传图片的功能无法利用获取 shell ？ 



## 3x07命令执行漏洞学习实战 

1、编写一个存在命令执行漏洞的页面（可以配置两套 win + linux ） 

2、通过命令执行如何进行文件传输（尝试尽量多的方式：离线+在线，不同的系统区别）

扩展学习：对于命令执行的输入口如何过滤，如何验证可以杜绝命令执行的问题 



## 3x08简单CMS 白盒审计